{
  "app_analysis": {
    "purpose": "Track fitness progress, workouts, nutrition, and body metrics in one place",
    "primary_user_goal": "Understand training performance and nutrition compliance at a glance",
    "key_data": [
      "Recent workout frequency and duration",
      "Daily calorie and protein intake vs goals",
      "Body weight progression",
      "Training volume (sets/reps/weight)"
    ],
    "key_actions": [
      "Log a new workout",
      "Add nutrition entry",
      "Record body measurements",
      "View progress trends"
    ],
    "mental_model": "Fitness dashboard showing 'How am I doing?' with weekly/monthly trends"
  },

  "theme": {
    "mode": "light",
    "font_family": "Inter",
    "font_url": "https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap",
    "colors": {
      "background": "hsl(0 0% 100%)",
      "foreground": "hsl(0 0% 10%)",
      "card": "hsl(0 0% 100%)",
      "card_foreground": "hsl(0 0% 10%)",
      "border": "hsl(0 0% 90%)",
      "primary": "hsl(142 70% 40%)",
      "primary_foreground": "hsl(0 0% 100%)",
      "accent": "hsl(142 70% 45%)",
      "muted": "hsl(0 0% 96%)",
      "muted_foreground": "hsl(0 0% 45%)",
      "positive": "hsl(142 70% 40%)",
      "negative": "hsl(0 70% 50%)"
    }
  },

  "layout": {
    "mobile": {
      "structure": "Single column vertical scroll with hero KPIs at top, followed by quick-add actions, then charts/lists",
      "hero_element": "Today's overview card with 3 core KPIs: Workouts this week, Calories today, Weight trend",
      "sections_order": [
        "Hero KPIs (Today's overview)",
        "Quick Actions (Add workout, Add meal, Log weight)",
        "Weekly Training Chart",
        "Recent Workouts List (last 5)",
        "Nutrition Today",
        "Goals Status"
      ],
      "hidden_from_mobile": [
        "Full exercise library",
        "Detailed body measurements history"
      ],
      "bottom_action": null,
      "navigation": "Scrollable single page dashboard"
    },
    "desktop": {
      "structure": "Two-column layout: Left column (60%) for KPIs and charts, Right column (40%) for lists and recent activity",
      "columns": "Left: Hero KPIs grid (3 cards), Primary chart below. Right: Quick actions, Recent workouts, Nutrition summary",
      "sidebar": null,
      "sections_order": [
        "Top: Hero KPI grid (3 cards spanning full width)",
        "Left: Weekly workout chart + Nutrition chart",
        "Right: Quick actions + Recent workouts list + Today's nutrition"
      ],
      "hover_interactions": [
        "KPI cards show trend details on hover",
        "Chart data points show exact values on hover",
        "Recent workout items expand to show exercises on hover"
      ]
    }
  },

  "components": {
    "kpis": [
      {
        "title": "Workouts diese Woche",
        "source_app": "workouts",
        "calculation": "count",
        "field": "datum",
        "filter": "last 7 days where rest_day is false",
        "format": "number",
        "context": "Goal: from ziele.trainingstage_pro_woche"
      },
      {
        "title": "Kalorien heute",
        "source_app": "ernaehrung",
        "calculation": "sum",
        "field": "kalorien",
        "filter": "today",
        "format": "number",
        "context": "Goal: from ziele.taeglich_kalorien"
      },
      {
        "title": "Protein heute",
        "source_app": "ernaehrung",
        "calculation": "sum",
        "field": "protein",
        "filter": "today",
        "format": "number",
        "context": "Goal: from ziele.taeglich_protein (in grams)"
      },
      {
        "title": "Aktuelles Gewicht",
        "source_app": "koerperdaten",
        "calculation": "latest",
        "field": "gewicht_kg",
        "format": "number",
        "context": "Show trend vs previous week"
      }
    ],
    "charts": [
      {
        "type": "bar",
        "title": "Trainingsaktivität (7 Tage)",
        "source_app": "workouts",
        "purpose": "Show workout frequency and duration over the last 7 days",
        "x_axis": { "field": "datum", "label": "Datum" },
        "y_axis": { "field": "dauer_minuten", "label": "Dauer (Min)" },
        "mobile_simplification": "Show last 5 days only, larger touch targets"
      },
      {
        "type": "line",
        "title": "Gewichtsverlauf (30 Tage)",
        "source_app": "koerperdaten",
        "purpose": "Track body weight changes over time",
        "x_axis": { "field": "datum", "label": "Datum" },
        "y_axis": { "field": "gewicht_kg", "label": "Gewicht (kg)" },
        "mobile_simplification": "Show trend line only, no individual data points"
      }
    ],
    "lists": [
      {
        "title": "Letzte Workouts",
        "source_app": "workouts",
        "purpose": "Quick reference to recent training sessions",
        "display_fields": ["datum", "typ", "dauer_minuten", "stimmung"],
        "mobile_display": "Card",
        "desktop_display": "Table",
        "sort_by": "datum",
        "sort_order": "desc",
        "limit": 5,
        "row_action": "Show workout details (linked workout_logs)"
      },
      {
        "title": "Heutige Mahlzeiten",
        "source_app": "ernaehrung",
        "purpose": "Overview of today's nutrition entries",
        "display_fields": ["mahlzeit_typ", "beschreibung", "kalorien", "protein"],
        "mobile_display": "Simple list",
        "desktop_display": "Cards",
        "sort_by": "mahlzeit_typ",
        "limit": 10,
        "row_action": "View meal details"
      }
    ],
    "primary_action": {
      "label": "Workout hinzufügen",
      "action": "navigate",
      "target_app": "workouts",
      "mobile_position": "header",
      "desktop_position": "header"
    },
    "secondary_actions": [
      {
        "label": "Mahlzeit loggen",
        "action": "navigate",
        "target_app": "ernaehrung"
      },
      {
        "label": "Gewicht eintragen",
        "action": "navigate",
        "target_app": "koerperdaten"
      }
    ]
  },

  "interactions": {
    "loading_state": "Skeleton loaders for KPI cards and charts, shimmer animation",
    "empty_state": "Friendly message: 'Noch keine Daten vorhanden. Starte jetzt mit deinem ersten Workout!' with primary action button",
    "error_handling": "Toast notification at top of screen with error message and 'Erneut versuchen' button",
    "success_feedback": "Brief toast notification with checkmark icon"
  },

  "animations": {
    "page_load": "stagger",
    "element_enter_delay_ms": 80,
    "hover_feedback": "Subtle scale (1.02) and shadow elevation on cards",
    "tap_feedback": "Brief opacity change (0.7) on touch"
  }
}
